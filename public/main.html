<!DOCTYPE html>
<html>
<head>
    <title>Glitch - Home</title>
    
  <script src="uv/uv.bundle.js" defer></script>
  <script src="uv/uv.config.js" defer></script>
  <script src="index.js" defer></script>
  <script src="register-sw.js" defer></script>
    <link rel="icon" href="assets/favicon.png" type="image/png">
    <style>body {overflow: hidden;}</style>

    <script>
      document.addEventListener("DOMContentLoaded",async function(){
        await navigator.serviceWorker.register('/sw.js');
      })

    </script>

    <link rel="stylesheet" type="text/css" href="scripts/css/global.css">
    
</head>
<body>
    <div id="app">
        <div id="toolbar">
            <style>


#modal-wrapper {
	position: fixed;
	width: 100%;
	height: 100%;
	top: 0;
	right: 0;
	bottom: 0;
	left: 0;
	background: rgba(0, 0, 0, 0.2);
	text-align: center;
	padding-top: 30px;
	opacity: 0;
	transition: 0.5s ease all;
	z-index: 99999;
}

#modal-wrapper.active {
	opacity: 1;
}

#modal-wrapper.active #modal-confirmation {
	margin-top: 0;
	opacity: 1;
}

#modal-confirmation {
	display: inline-block;
	margin-top: -30px;
	opacity: 0;
	max-width: 400px;
	border-radius: 4px;
	overflow: hidden;
	box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);
	background: #fff;
	text-align: left;
	transition: 0.5s ease all;
}

#modal-header {
	position: relative;
	background: #ff6b6b;
	padding: 15px;
	color: #fff;
	text-align: left;
}

#modal-header h3 {
	font-weight: 300;
	margin: 0;
}

#modal-close {
	position: absolute;
	right: 15px;
	top: 12px;
	font-size: 1.5em;
	cursor: pointer;
	color: #bd3d3d;
}

#modal-close:hover {
	color: #fff;
}

#modal-content {
	padding: 30px 15px;
}

#modal-content p {
	margin: 0;
	color: #61686e;
}

#modal-buttons {
	padding: 0 15px 15px 15px;
	text-align: right;
}

#modal-button-no {
	border: 2px solid #98a1a9;
	padding: 10px 30px;
	background: #fff;
	color: #98a1a9;
	font-weight: bold;
	border-radius: 4px;
	cursor: pointer;
	transition: 0.5s ease all;
}

#modal-button-no:hover {
	background: #98a1a9;
	color: #fff;
}

#modal-button-yes {
	border: 2px solid #ff6b6b;
	padding: 10px 50px;
	background: #ff6b6b;
	color: #fff;
	font-weight: bold;
	border-radius: 4px;
	cursor: pointer;
	transition: 0.5s ease all;
	margin-left: 10px;
}

#modal-button-yes:hover {
	border: 2px solid #ff4242;
	background: #ff4242;
}
                .material-symbols-outlined {
                    transition: background-color 0.3s, transform 0.3s;
        }
        
        .material-symbols-outlined:hover {
          transition: transform 0.2s, box-shadow 0.2s; /* Smoother transitions */
          transform: scale(1.15); /* Subtle scaling effect */
          box-shadow: 0 8px 16px rgba(0,0,0,0.2); /* Deeper shadow on hover */
        }
        
        
            </style>
            <img src="assets/images/logo_trans.png" id="glitch-logo" alt="Glitch">
            <div id="nav-links">
                <div id="separator"></div>
                
                <div onclick="window.location.href = 'main.html'"  style="display: flex;">
                <span class="material-symbols-outlined">home</span>
                <h3 onclick="window.location.href = 'main.html'">Home</h3>
                </div>
                <h3>/</h3> 
                
                <div onclick="window.location.href = 'apps.html'" style="display: flex;">
                <span class="material-symbols-outlined">apps</span>
                <h3 >Apps</h3>
              </div>
                <h3>/</h3>
                <div onclick="window.location.href = 'discord.html'"  style="display: flex;">
                <span class="material-symbols-outlined">chat</span>
                <h3>Discord</h3>
              </div>
              <h3>/</h3>
              
              <div onclick="window.location.href = 'abtbrw.html'"  style="display: flex;">
        
                <span class="material-symbols-outlined">language</span>
                <h3>Browser</h3>
              </div>
                <h3>/</h3>
                <div onclick="window.location.href = 'settings.html'" style="display: flex;">
                <span class="material-symbols-outlined" style="font-variation-settings: filled;">settings</span>
                <h3 >Settings</h3>
              </div>
                <h3>|</h3>
                <h3 id="time">hai</h3>
            </div>
            <script>
            function updateTime() {
        const timeElement = document.getElementById('time');
        if (!timeElement) return;
        
        const now = new Date();
        let hours = now.getHours();
        const minutes = now.getMinutes();
        const ampm = hours >= 12 ? 'PM' : 'AM';
        
        hours = hours % 12;
        hours = hours ? hours : 12;
        const minutesStr = minutes < 10 ? '0' + minutes : minutes;
        
        const timeStr = `${hours}:${minutesStr} ${ampm}`;
        timeElement.textContent = timeStr;
        }
        
        setInterval(updateTime, 5000);
        updateTime(); 
            </script>
        </div>
    </div>
    <br>

    <div id="content">
        <center>
            <br>
            <br>
            <br>
            <h1 style="font-size: 70px;">Glitch</h1>
            <br>

            <div class="tos-notification" style="display: none;">
                <div class="tos-content" style="color: black; text-align: left; padding: 20px; background-color: #fff; border-radius: 10px; width: 70%;">
                    <h2>Welcome!</h2>
                    <p>
                        Welcome to Glitch! The proxy that knows <b>NOTHING</b> about you. There is a catch, though: you need to agree to our TOS. 
                        It says that we not liable for any actions you take while using our service, mainly because we don't know what you do.
                        <br>

                    </p>
                    <p>
                        The TOS is available <a href="tos.md">here</a>.
                        By using any Glitch service on or after the publication of these terms, you acknowledge and accept these terms.
                    </p>
                    <p>
                        <button class="close-tos-btn" style="background-color: #131313; color: white; padding: 10px; border: none; border-radius: 5px;">I Agree</button>
                    </p>
                </div>
            </div>
            <div class="container">
                <div class="searchInput">

                    <input id="search" placeholder="Search..." type="text" style="width: 70%; height: 25px; background-color: #131313; border: none; padding: 15px; color: white; border-radius: 20px;"/>
            

                  <div class="resultBox">
                    <!-- here list are inserted from javascript -->
                  </div>
<span class="material-symbols-outlined" style="right: 15%; bottom: calc(45% - 10px); position: absolute;">search</span>
                </div>
              </div>
            <br>
            <button id="cloak" class="main_button">Cloak</button>
            <button class="main_button" onclick="window.location='https://discord.gg/mWGtwnyjgK'">Join the Discord</button>   
            <button class="main_button" onclick="window.location='contributers.html'">Contributers</button>   
            <button class="main_button" onclick="load_dex()">Dextensify</button>   
            <br>
            <br>
            <center>
              <div style="padding: 20x; border-radius: 15px; background-color: #1f1f1f; width: 25%; padding-top: 25px; padding-bottom: 25px;">
              <script type="text/javascript">
                atOptions = {
                  'key' : 'e17a0ee6656019085028f3a33b2a5424',
                  'format' : 'iframe',
                  'height' : 250,
                  'width' : 300,
                  'params' : {}
                };
              </script>
              <script type="text/javascript" src="https://udbaa.com/bnr.php?section=General&pub=594163&format=300x250&ga=g"></script>
              <noscript><a href="https://yllix.com/publishers/594163" target="_blank"><img src="//ylx-aff.advertica-cdn.com/pub/300x250.png" style="border:none;margin:0;padding:0;vertical-align:baseline;" alt="ylliX - Online Advertising Network" /></a></noscript>
              <p><b style="color: rgb(124, 124, 124);">AD to pay for servers.</b></p>
            </div>
            </center>


            </div>
        </center>

        <div style="position: fixed; right: 35px; bottom: 25px;">



            <h2 style="color: rgb(50, 141, 245);" onclick="window.location='premium.html'">Premium</h2></div>
    </div>

    <script>

                    function load() {
    const presets = {
        "Google Slides": "/assets/favicons/slides_favicon.png",
        "Google": "/assets/favicons/google_favicon.png",
        "I-Ready": "/assets/favicons/iready_favicon.png",
        "Clever": "/assets/favicons/clever_favicon.png",
        "FBI": "https://www.fbi.gov/++theme++fbigov.theme/images/fbi_seal_new.png",
        "Google Classroom": "/assets/favicons/classroom_favicon.png",
        "Github": "/assets/favicons/github_favicon.jpg",
        "Wikipedia": "/assets/favicons/wiki_favicon.png"
    };

    let preset = localStorage.getItem("autohide_preset") || "Google Classroom";

    let x = "main.html";
    newWin = window.open("", "newWindow", "width=1800, height=1600");
    newWin.document.write('<iframe src="'+ x +'" style="position: fixed; inset: 0; outline: none; border: none; height: 100%; width: 100%;"></iframe>');
          

if(!newWin || newWin.closed || typeof newWin.closed=='undefined') 
{ 
    alert("Please allow popups by using the button in the URL bar. This will allow this link to last longer without being blocked and to stay out of your search history")
}
else {
  window.location = "https://google.com"
}

    
    
}


// load()
         



            document.getElementById("cloak").addEventListener("click",function(){

load();


    })
    function load_dex() {
    const presets = {
        "Google Slides": "/assets/favicons/slides_favicon.png",
        "Google": "/assets/favicons/google_favicon.png",
        "I-Ready": "/assets/favicons/iready_favicon.png",
        "Clever": "/assets/favicons/clever_favicon.png",
        "FBI": "https://www.fbi.gov/++theme++fbigov.theme/images/fbi_seal_new.png",
        "Google Classroom": "/assets/favicons/classroom_favicon.png",
        "Github": "/assets/favicons/github_favicon.jpg",
        "Wikipedia": "/assets/favicons/wiki_favicon.png"
    };

    let preset = localStorage.getItem("autohide_preset") || "Google Classroom";

    let x = "features/dexten.html";
    newWindow = window.open(x);
  newWindow.document.write('<iframe src="'+ x +'" style="position: fixed; inset: 0; outline: none; border: none; height: 100%; width: 100%;"></iframe>');

    
}


        document.addEventListener("DOMContentLoaded", function() {
            document.addEventListener("keypress", function(e) {
                if (e.key === "Enter") {
                    window.location = ("launch.html?url=" + document.getElementById("search").value);
                }
            });


            // Check if this is the first time visiting
            if (!localStorage.getItem("first_time_visiting")) {
                document.querySelector(".tos-notification").style.display = 'block';
            }

            // Add event listener to TOS close button
            document.querySelector(".close-tos-btn").addEventListener('click', function() {
                document.querySelector(".tos-notification").style.display = 'none';
                localStorage.setItem("first_time_visiting", "1");
            });
        });


       
        let suggestions = [
    
];

// getting all required elements
const searchInput = document.querySelector(".searchInput");
const input = searchInput.querySelector("input");
const resultBox = searchInput.querySelector(".resultBox");
const icon = searchInput.querySelector(".icon");
let linkTag = searchInput.querySelector("a");
let webLink;


    let search_engine_preference = localStorage.getItem("search_engine");
    let search_engine = "https://www.google.com/search?q="; // Default search engine
    const proxy_bridge = localStorage.getItem("proxy");
    const premium_status = localStorage.getItem("premium") === "true";


    // Set search engine based on preference
    if (search_engine_preference) {
      switch (search_engine_preference) {
        case "Google":
          search_engine = "https://www.google.com/search?q=";
          break;
        case "DuckDuckGo":
          search_engine = "https://duckduckgo.com/?q=";
          break;
        case "Bing":
          search_engine = "https://www.bing.com/search?q=";
          break;
        case "Yahoo":
          search_engine = "https://search.yahoo.com/search?p=";
          break;
        case "Torry":
          search_engine = premium_status ? "https://www.torry.io/search/?type=oniontab&searchby_type=1&page=1&q=" : "https://www.google.com/search?q=";
          break;
        case "Startpage":
          search_engine = premium_status ? "https://www.startpage.com/do/search?query=" : "https://www.google.com/search?q=";
          break;
        case "Qwant":
          search_engine = premium_status ? "https://www.qwant.com/?t=web&q=" : "https://www.google.com/search?q=";
          break;
        case "Brave":
          search_engine = premium_status ? "https://search.brave.com/search?q=" : "https://www.google.com/search?q=";
          break;
        case "Google Scholar":
          search_engine = premium_status ? "https://scholar.google.com/scholar?q=" : "https://www.google.com/search?q=";
          break;
        default:
          search_engine = "https://www.google.com/search?q=";
          search_engine_preference = "Google"
          break;
      }

    }
    else{
        search_engine = "https://www.google.com/search?q=";
          search_engine_preference = "Google"
      }

// if user press any key and release
input.onkeyup = (e)=>{
    let userData = e.target.value; //user enetered data
    let emptyArray = [];
    if(userData){
        fetch("/search_complete/" + encodeURIComponent(userData))
  .then(response => response.text())
  .then(data => {
    jsonData = JSON.parse(data);
    suggestions = jsonData[1]; // Assuming the suggestions are in the second element of the JSON response
  });
        emptyArray = suggestions.filter((data)=>{
            //filtering array value and user characters to lowercase and return only those words which are start with user enetered chars
            return data.toLocaleLowerCase().startsWith(userData.toLocaleLowerCase()); 
        });
        emptyArray = emptyArray.map((data)=>{
          preset = localStorage.getItem("autohide_preset") || "Google Classroom";
          // passing return data inside li tag
            return data = `<li onclick="window.location='launch.html?url=${encodeURIComponent(search_engine+data)}'">`+ data + " - <span style='filter: opacity(0.4);'>"+ search_engine_preference +" Search</span>" +'</li>';
        });
        searchInput.classList.add("active"); //show autocomplete box
        showSuggestions(emptyArray);
        
    }else{
        searchInput.classList.remove("active"); //hide autocomplete box
    }
}

function showSuggestions(list){
    let listData;
    if(!list.length){
        userValue = document.getElementById('search').value;
        listData = '<li>'+ userValue +'</li>';
    }else{
        listData = list.join('');
    }
    resultBox.innerHTML = listData;
}

    </script>
    <script src="scripts/js/global.js"></script>
</body>
</html>
